## 前言

后期指的是样式修订、ASS 规范化、特效编写等一系列杂活，通常需要熟悉 ASS 和 Aegisub，所以学习路径相对时轴等长得多。

由于后期需要学的内容繁杂，一般在实战中自己总结经验，难以书写教程，所以我会以实战的流程介绍后期，便于书写、也便于大家入门。

*部分字幕组不会单独设立后期职位，而是让时轴负责全流程*

## 从实战流程入门后期

### 创建 or 导入 ASS

打开 Aegisub 会自动创建一个空白的 ASS，按保存快捷键 `Ctrl + S` 即可保存。

使用 Aegsiub 打开已有的 ASS 文件，或将文件拖入 Aegisub，即可载入 ASS。

* Aegisub 的所有快捷键都可以自定义。

* 在 Windows 中，将文件拖到程序文件上，或者将指定文件的默认打开方式 (同后缀为同种打开方式) 设为目标程序，即为使用该程序打开指定的文件。

* 很多格式的文件都可以拖入 Aegisub
  * 字幕格式 ASS、SRT、SSA (Aegisub 可以打开 SSA，但并不兼容 SSA)
  * 各种音视频格式拖入后会作为参考媒体，视频轨道 -> 预览画面窗口、音频轨道 -> 音频可视化窗口
  * `.txt` 等文件在有视频的情况下会识别是否是 关键帧 or 时间码 文件，同理，菜单栏的视频选项中，有导出当前视频关键帧、时间码文件的功能

* 只想测试 ASS 字幕，没有音视频文件？可以在菜单栏的 视频 和 音频 选项中新建空白视频和空白音频

### 核对你的音视频文件

不要做 BD 的时候误导入成 Web 文件了，到时候时轴啥的全是错的，太难补救了。  
虽然这听着很呆，但就是防止不了很多人出错。

小心有些 BD 和 Web 的帧率不一样，恰好你需要把 Web 字幕改成 BD 字幕，那你就有福喽，慢慢折腾去吧。  
如果帧率不同导致了时长不同，写个 Aegisub 的 lua 脚本用于重设帧率。

### 核对你安装的字体

打开 Aegisub 的字体收集器，执行检查字体可用性，确认你刚拿到手的字幕中使用的字体都安装了。

总是有人不记得核对字体，发现样式不对了也想不起来是字体的问题，所以一定要提前养成核对字体的习惯。

### 小心 Script Info

正式编辑 ASS 的 Event 行前，一定要先编辑 Script Info，就像前面初识 ASS 的教程中提到的，Script Info 很重要，不提前设置好会导致你在制作样式时预览的颜色全是错的等一系列问题，后面补救就麻烦了。

详见[前面的教程](https://github.com/CheeseAni/Subtitle-Production-Tutorial/tree/main/%5B005%5D%20%E5%88%9D%E8%AF%86%20ASS%20%26%20Aegisub#script-info)，这里不重复写了。

### 规划 Style

一个简洁的样式表是 ASS 简洁的必要条件，我一般给所有屏幕字一个样式 `screen`，所有中文对话行一对样式 `zh` `zh-top`，如果是双语，另一个语言的命名方式类似中文，详见前面教程里的双语字幕格式。

屏幕字的样式一定要 0 边框 0 阴影，需要时用行内样式标签自定义，千万不要在样式中启用边框或阴影，否则在实际制作时你可能都注意不到你误给屏幕字加了边框或阴影。

给 OP ED 单独定样式，那就把样式名写作 `OP` `ED` 吧，双语的话就加个后缀喽 `OP-zh`。

### 规划字体选用

选用字体时，要尽量少用字体，节约后续发布流程的体积，同类型的字体尽量复用，例如 `a楷体` 和 `b楷体` 长得差不多，那就只用一个，一个项目中有很多集字幕，规划的字体复制到一个文件夹内，找字体时先从这个文件夹内找，防止同类型重复。

有些字体是 Regular，没有 Bold，所以尽量别用 `\b1` 等启用粗体，特别是一些 Regular 的多自重字体，例如 `方正兰亭圆_GBK` 系列，你觉得 `方正兰亭圆_GBK_中` 不够粗，那你可以用 `方正兰亭圆_GBK_中粗`，而不是启用 ASS 的粗体。

需要对一个样式的部分文字倾斜时，使用 `\fax` 而不是 `\i1`，前者只是让渲染倾斜，后者会调用 Italic 对应的字体。

### Event 区域划分

很多人喜欢将屏幕字放在最前面，我也一样，这样方便管理。  
所以在编辑屏幕字前，先把它们都剪贴到顶部吧。

分割不同区域时可以使用 Comment 行分割，在 Aegisub 里 Comment 行是紫色的，很容易一眼看出来这里是个分割线。

因为屏幕字行我使用的样式都是 `screen`，并全部放在了头部，样式列在 Aegisub 里对齐了，很容易一眼看出来哪块是屏幕字，也就不需要用 Comment 行分割了。  
照着这个思路，还可以用 说话人、边距 等列划分区域，原理都是在 Aegisub 里很容易一眼看出来。

恰当地划分区域，有助于复制、移动、替换、排序等批量操作。

### 平移整体时轴

`Ctrl + 1` 至 `Ctrl + 6` 对应了按钮栏那排时轴按钮，作用为 当前预览画面跳转到时轴对应的帧 和 当前时轴对齐到当前帧。

拿到字幕后，可能与视频存在偏移。  
不要使用平移时轴工具手动输入时间或帧，而是要使用 `Ctrl + 6`，先全选，然后找到当前行的位置对应的预览画面的位置，按下快捷键或点对应按钮，即可全部按帧偏移。

### 规避时轴重叠

人物同时说话时时轴重叠，不调整样式的话会叠在一起。

如果说话内容有主次之分，例如 A 句跟剧情有关，B 句只是背景里的龙套角色说的背景音，  
则 B 放到顶部，A 不修改，以上文的样式名举例，就是把 B 的样式改为 `zh-top`。

如果说话内容没有主次之分，尽量使用边距值将字幕放到两边，  
例如 1920p 宽度的视频，A 说话人在画面左边，B 说话人在画面右边，则 A 字幕行给右边距 800，B 字幕行给左边距 800。  
特殊情况同上文方法将一句放到顶部。

不管以什么方式调整字幕位置，需保证说话人对应的字幕位置在一次对话内不变，  
不能因为仅这句重叠，就把这句放在顶部，下句同一个人说话的字幕放在底部，这样会导致观众判断错乱，观众需要暂停观看。  
例如 A 先说话，B 再说话，B 的第一句与 A 重叠，其他句不重叠，B 第一句放在顶部了，则其他句全部放在顶部。

### 制作屏幕字

#### 对齐时轴

* 制作屏幕字时，**必须**使用上文中对齐帧的方式按帧对齐画面，不能有一帧偏差。

* 选中多行字幕，右键，有**合并字幕**的选项，不需要手动复制粘贴。

* 在文本编辑区，右键，有**分割字幕**的选项，不需要手动复制粘贴。

#### 契合视频样式

契合个大概就行了，没必要死磕非要跟视频中的样式一样，换个角度想想，如果样式完全一样了，观众反而会一眼找不到哪个是翻译后的文字，还需要暂停观看。

尽量不遮挡原文，这样懂原文的观众可以看原文。

没必要翻译的部分别加屏幕字:

* 与剧情无关的部分，做出来纯浪费时间还影响观看。
* 所有人都能看懂原文的部分，例如某些日文词与中文几乎一致，大家都能看懂就不用加屏幕字。

##### 一些技巧和注意事项

* 做屏幕字时关闭视频预览窗口的自动跳转开关会方便非常多，否则每次点击字幕行视频都会跳转。

* 焦点在视频预览窗口上时，按 `A S D F ...` 键可**快速切换工具**。  
  **双击视频可直接移动字幕**到双击位置，不需要切换到拖放工具。

* 按住鼠标中间可拖动视频画面，这是使用**高倍缩放**时唯一的解决方法，右键点还原即可还原。

* 鼠标指针放在视频进度条上，滚动滚轮，即可**逐帧跳转**。

* 修改颜色:  
  Aegisub 的修改颜色窗口中，点吸管按钮即可在视频中取色，  
  如果有噪点等导致每个像素颜色偏差过大，可以缩小视频，即可**取到平均色**。

* 平行于画面中的平面:  
  使用四角定位工具即可轻松解决。  
  这个工具按住 `Ctrl` 再点击顶点，可以选中多个顶点一起平移。  
  注意这个工具的相对位置会被 `\a` 影响。  
  有的动画中的手绘平面并不是真正合理的平面，所以无法平行也正常。  
  由于 `\fax`，有换行的文字会像台阶一样，边缘无法对齐，切换到**无\fax模式**即可，也可以使用空白字符填充边缘以对齐。

* `\shad` 无法使用负数也无法单独调整一个方向的大小，使用 `\xshad` `\yshad` 解决，`\xbord` `\ybord` 同理。

* `\blur` `\be` 这些模糊标签，在无 bord 时会模糊本体，所以不希望本体模糊的话，例如只模糊 shad，新建一个字幕，调整层，只模糊 shad 的那行 `\1a` 拉到最大值小1，也就是 254 ，16 进制 FE，并设置模糊。

* 模糊不够透明，不要无脑拉高 blur，而是通过调整透明度标签达到效果。

* `\frx` `\fry` `\frz` 调整三个轴的旋转，平时最常见的就是 `\frz`，也就是旋转工具会调整的值。  
  旋转中心是 `\org`，如果没设，默认值是 `\pos` 的值。

* 倾斜使用 `\fax` `\fay`，不要用 `\i`。

* 需要蒙版时，使用 Aegisub 的视频可视化窗口左侧的**裁切工具**轻松绘制图案，具体语法详见 `\clip` `\iclip` 用法。

* 需要自定义图形时，使用 `\p` 创建矢量图形，与 `\clip` 的图形语法一致。  
  `\pbo` 可以偏移图形的基线，但这个标签几乎不可能用到，因为用 `\pos` 就能解决。

* 矢量图形的语法和 `\clip` 图形的语法是一样的，所以你可以使用 Aegisub 的视频可视化窗口左侧的**裁切工具**生成 clip 的矢量代码，然后剪贴到 `\p` 中。

* `\p` 的锚点是 `\pos`，而 `\clip` 的锚点是 `(0,0)`，所以如果你想让 `\p` 和 `\clip` 的矢量代码**渲染效果一致**，你需要给 `\p` 加上 `\an7\pos(0,0)`。

* 需要**时域渐变**标签的值，使用 `\t`。

* 需要**淡入淡出**时使用 `\fad`，需要自定义其透明度，使用 `\fade`，当然也可以使用 `\t` 代替，如果需要自定义加速度，也只能用 `\t` 代替。  
  使用 `\fad` 时，第一个参数是字幕开始时间与淡入结束时间的绝对值，第二个参数为字幕结束时间与淡出开始时间的绝对值。  
  如何**精准复制**那帧对应的 `\fad` 的参数呢？视频预览窗口右下角有个 `+0ms; -0ms` 控件，  
  找到淡入结束的那帧 f1，也就是时间比 f1 小的前一帧比 f1 淡，时间比 f1 大的后一帧与 f1 透明度一致，此时控件中第一个数值就是 `\fad` 的第一个参数；  
  找到淡出开始的那帧 f2，也就是时间比 f2 小的前一帧与 f2 透明度一致，时间比 f2 大的后一帧比 f2 淡，此时控件中第二个数值就是 `\fad` 的第二个参数。
